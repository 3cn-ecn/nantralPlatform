{% extends 'group/group_base_update.html' %}
{% load crispy_forms_tags %}
{% block page %}
</br>
<a class='btn btn-dark' href="{% url 'group:create-event' object.slug%}">Ajouter un event</a>
</br>
</br>
<h2>Liste des events planifiés</h2>
<a class='btn btn-dark' href="{% url 'group:archived-events' object.slug%}">Events archivés</a>
</br>
{% if events.count > 0 %}
<form method='POST' action="{% url 'group:update-events' object.slug %}">
  {% csrf_token %}
  {{ form.management_form }}
  {% for event in form %}
  <div class='card'>
    <div class='card-body'>
      {{event | crispy}}
    </div>
  </div>
  {% endfor %}
  </br>
  <button class='btn btn-dark'>Enregistrer les modifications</button>
</form>
{% else %}
<p>C'est un peu mort par ici ... Ajoute vite un evenement, utilise les évenements archivés pour t'inspirer.</p>
{% endif %}
{% endblock %}
{% block script %}
<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
<script>
  $(function () {
    $('input.datepicker').daterangepicker({
      singleDatePicker: true,
      drops: 'up',
      showDropdowns: true,
      autoApply: true,
      timePicker: true,
      timePicker24Hour: true,
      timePickerIncrement: 15,
      locale: {
        format: 'YYYY-MM-DD HH:mm'
      },
      minYear: 2020,
      maxYear: parseInt(moment().format('YYYY'), 10)
    });
  });
</script>
{% endblock %}