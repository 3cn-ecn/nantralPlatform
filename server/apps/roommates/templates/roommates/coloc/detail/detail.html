{% extends 'group/detail/detail.html' %}
{% load static %}


{% block object_name %}
    {{object.name}} ({{object.begin_date|date:'Y'}})
{% endblock %}

{% block infos %}
    <p>
        Adresse : <a href="https://www.google.com/maps/dir/?api=1&travelmode=transit&destination={{housing.address}}" target='_blank'>{{housing.address}}</a> - {{housing.details}}
        <br/>
        {% if object.end_date %}
            Colocataires de {{object.begin_date|date:'F Y'|title}} Ã  {{object.end_date|date:'F Y'|title}}.
        {% else %}
            Colocataires depuis {{object.begin_date|date:'F Y'|title}}.
        {% endif %}
    </p>
{% endblock %}


{% block before_content %}
    <!-- Liste des membres -->
    <br />
    {% if request.user.is_authenticated %}
        {% if members %}
            {% include 'student/student_cards.html' with members=members %}
        {%else%}
            <p>Aucun membre pour l'instant... ðŸ˜¥</p>
        {%endif%}
    {% else %}
        <p>Veuillez vous connecter pour voir les membres.</p>
    {% endif %}
{% endblock %}


{% block members %}
{% endblock %}


{% block after_content %}
    <!-- Liste des autres colocs -->
    <br>
    <h2 class="mb-3">Ils sont aussi passÃ©s par lÃ ...</h2>
    <div class="row">
        {% for roommates in roommates_list %}
            <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
                <div class="card h-100">
                    {% if roommates.banniere %}
                        <div class="ratio card-img-top" style="--bs-aspect-ratio: 37%;">
                            <img src="{{roommates.banniere.url}}" style="object-fit: cover;" />
                        </div>
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{roommates.name}} ({{roommates.begin_date|date:'Y'}})</h5>
                        <h6 class="card-subtitle mb-2 text-muted">
                            {% if roommates.end_date %}
                                De {{roommates.begin_date|date:'F Y'|title}} Ã  {{roommates.end_date|date:'F Y'|title}}
                            {% else %}
                                Depuis {{roommates.begin_date|date:'F Y'|title}}
                            {% endif %}
                        </h6>
                        <p class="card-text">
                            {{roommates.members.all|join:", "}}
                        </p>
                        <a href="{{roommates.get_absolute_url}}" class="stretched-link"></a>
                    </div>
                </div>
            </div>
        {% endfor %}
        <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
            <div class="card bg-success text-white text-center h-100">
                <div class="card-body">

                    <p class="card-text">Ajouter ma coloc Ã  cette adresse</p>
                    <a href="{% url 'roommates:create-roommates' housing.pk %}" class="stretched-link"></a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}