"use strict";(self.webpackChunknantralplatform_docs=self.webpackChunknantralplatform_docs||[]).push([[6828],{6553:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=n(5893),i=n(1151);const r={sidebar_position:3},o="Integration Tests",a={id:"dev/guides/tests/integration-tests",title:"Integration Tests",description:"Integration tests allows us to test the features of the code.",source:"@site/docs/dev/guides/tests/integration-tests.md",sourceDirName:"dev/guides/tests",slug:"/dev/guides/tests/integration-tests",permalink:"/dev/guides/tests/integration-tests",draft:!1,unlisted:!1,editUrl:"https://github.com/3cn-ecn/nantralPlatform/tree/master/docs/docs/dev/guides/tests/integration-tests.md",tags:[],version:"current",lastUpdatedBy:"Alexis Delage",lastUpdatedAt:1692831924,formattedLastUpdatedAt:"Aug 23, 2023",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"sidebar",previous:{title:"Linting and Formatting",permalink:"/dev/guides/tests/linting"},next:{title:"Debugging",permalink:"/dev/guides/debugging"}},d={},l=[{value:"Philosophy",id:"philosophy",level:2},{value:"Run tests",id:"run-tests",level:2},{value:"On the back end",id:"on-the-back-end",level:3},{value:"On the front end",id:"on-the-front-end",level:3},{value:"Write tests",id:"write-tests",level:2},{value:"With django (on the back end)",id:"with-django-on-the-back-end",level:3},{value:"With jest for React (on the front end)",id:"with-jest-for-react-on-the-front-end",level:3}];function h(e){const t={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,s.jsx)(t.p,{children:"Integration tests allows us to test the features of the code."}),"\n",(0,s.jsx)(t.p,{children:"This is an important thing to do, to avoid regressions (if we add a new feature,\nwe should be sure that previous features still work)."}),"\n",(0,s.jsx)(t.h2,{id:"philosophy",children:"Philosophy"}),"\n",(0,s.jsx)(t.p,{children:"A good integration test is a test that reproduces the user experience."}),"\n",(0,s.jsx)(t.p,{children:"For example, on the back end, we must have test that calls the API routes\nand check that the returned objects are correct. We also have to test the\npermissions and the error messages."}),"\n",(0,s.jsx)(t.p,{children:"On the front end, integration tests should reproduce the user experience,\nby simulating clicks on button, fill-in forms, etc., and watch the result."}),"\n",(0,s.jsx)(t.h2,{id:"run-tests",children:"Run tests"}),"\n",(0,s.jsx)(t.h3,{id:"on-the-back-end",children:"On the back end"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["on the whole back end:","\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"pipenv run test\n"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["on a specific app of the backend:","\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"pipenv run test <path>\n"})}),"\n","where ",(0,s.jsx)(t.code,{children:"<path>"})," is the path of the app, for example ",(0,s.jsx)(t.code,{children:"apps.group"})]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"on-the-front-end",children:"On the front end"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["on the whole front end:","\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npm run jest\n"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["on a specific file","\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npm run jest <path>\n"})}),"\n","where ",(0,s.jsx)(t.code,{children:"<path>"})," is a regex, for example you can use ",(0,s.jsx)(t.code,{children:"npm run jest Home"})," to run\nthe file ",(0,s.jsx)(t.code,{children:"Home.page.test.tsx"})]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"write-tests",children:"Write tests"}),"\n",(0,s.jsx)(t.h3,{id:"with-django-on-the-back-end",children:"With django (on the back end)"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["All tests should be written in a ",(0,s.jsx)(t.code,{children:"tests.py"})," file, or in a ",(0,s.jsx)(t.code,{children:"tests/"})," folder."]}),"\n",(0,s.jsx)(t.li,{children:"You should test ideally all API routes, especially for the permissions."}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"with-jest-for-react-on-the-front-end",children:"With jest for React (on the front end)"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["All tests should be written in files with the suffix ",(0,s.jsx)(t.code,{children:".test.ts"})," or ",(0,s.jsx)(t.code,{children:".test.tsx"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Do not test every component: only test ",(0,s.jsx)(t.em,{children:"Pages"}),", and complex functions that can\neasily break."]}),"\n",(0,s.jsxs)(t.li,{children:["Test the user experience (like clicking a button should make this text appear,\netc.). Refer to the guides for React of the ",(0,s.jsx)(t.em,{children:"Testing Library"})," project."]}),"\n",(0,s.jsxs)(t.li,{children:["You can make snapshots if you think that's useful, but don't use too many of\nthem. To update a snapshot, run:","\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npm run jest:u <path>\n"})}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>o});var s=n(7294);const i={},r=s.createContext(i);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);