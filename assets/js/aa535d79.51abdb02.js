"use strict";(self.webpackChunknantralplatform_docs=self.webpackChunknantralplatform_docs||[]).push([[5593],{7982:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>a});var i=s(5893),t=s(1151);const d={title:"Commands Memo",sidebar_position:98},l="Commands Memo",r={id:"dev/commands",title:"Commands Memo",description:"Updates",source:"@site/docs/dev/commands.md",sourceDirName:"dev",slug:"/dev/commands",permalink:"/dev/commands",draft:!1,unlisted:!1,editUrl:"https://github.com/3cn-ecn/nantralPlatform/tree/master/docs/docs/dev/commands.md",tags:[],version:"current",lastUpdatedBy:"Alexis Delage",lastUpdatedAt:1692057778,formattedLastUpdatedAt:"Aug 15, 2023",sidebarPosition:98,frontMatter:{title:"Commands Memo",sidebar_position:98},sidebar:"sidebar",previous:{title:"List of websites",permalink:"/dev/admin/website-list"},next:{title:"Resources \ud83d\udd17",permalink:"/dev/resources"}},o={},a=[{value:"Updates",id:"updates",level:2},{value:"The Back End",id:"the-back-end",level:2},{value:"Use the django CLI",id:"use-the-django-cli",level:3},{value:"Useful django commands",id:"useful-django-commands",level:3},{value:"The Front End",id:"the-front-end",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"commands-memo",children:"Commands Memo"}),"\n",(0,i.jsx)(n.h2,{id:"updates",children:"Updates"}),"\n",(0,i.jsxs)(n.p,{children:["When you pull the last changes from Github, you need to update your dependencies\nand to apply the last changes on your local database. You can do all of this in one\ncommand, runnable from the ",(0,i.jsx)(n.code,{children:"nantralPlatform"})," directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"make update\n"})}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"But what does it do exactly? I'm curious!"}),(0,i.jsx)(n.p,{children:"The update runs the following commands:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm install"}),": update the list of dependencies for the front end"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv install --dev"}),": update the list of dependencies for the back end"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run migrate"}),": apply the last changes on your database"]}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"the-back-end",children:"The Back End"}),"\n",(0,i.jsx)(n.p,{children:"Here are the main commands to deal with the backend and django."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv install --dev"}),": install all latest dependencies of the project"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run start"}),": launch the django server"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run test"}),": run all the tests of django"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run makemigrations"}),": create the migration files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run migrate"}),": apply the new migration files"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run format"}),": format all python code according to Pep8 style"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run coverage-test"}),": do the same thing as ",(0,i.jsx)(n.code,{children:"pipenv run test"})," but using the ",(0,i.jsx)(n.code,{children:"coverage"})," package"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run coverage report"}),": see a report about the coverage of tests (works only if run after ",(0,i.jsx)(n.code,{children:"cover-test"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Need more commands? You should find what you want here!"}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"Pipenv"}),": dependencies and virtual environment management"]}),(0,i.jsxs)(n.p,{children:["Firstly, here is how to deal with ",(0,i.jsx)(n.strong,{children:"dependencies"})," with Pipenv:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv install --dev"}),": install all dependencies of the ",(0,i.jsx)(n.code,{children:"Pipfile"}),",\nincluding the dev ones. It generates a ",(0,i.jsx)(n.code,{children:"Pipfile.lock"})," file which will then\nbe used for the server to deploy."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv install <package>"}),": install a specific python package"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv update --outdated"}),": list all outdated packages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv update"}),": update a package or all outdated packages"]}),"\n"]}),(0,i.jsxs)(n.p,{children:["Then you can also manage your python ",(0,i.jsx)(n.strong,{children:"virtual environment"})," with Pipenv:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv shell"}),": open the python virtual environment. You can then close it by executing ",(0,i.jsx)(n.code,{children:"exit"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run <command>"}),": allow to execute one single command inside the virtual environement.\nIt's faster than opening it each time!"]}),"\n"]}),(0,i.jsxs)(n.p,{children:["Finally, Pipenv allows to define ",(0,i.jsx)(n.strong,{children:"shortcuts"})," to execute commands inside the virtualenv.\nAll shortcuts begin with ",(0,i.jsx)(n.code,{children:"pipenv run"}),", follow by a key word. Some examples:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"pipenv run start"}),": a shortcut for"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pipenv shell\npython manage.py runserver\nexit\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"pipenv run django <command>"}),": a shortcut for"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pipenv shell\npython manage.py <command>\nexit\n"})}),"\n"]}),"\n"]}),(0,i.jsxs)(n.p,{children:["You can list all the shortcuts by running ",(0,i.jsx)(n.code,{children:"pipenv scripts"}),"."]})]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"Django"}),": server managments"]}),(0,i.jsx)(n.h3,{id:"use-the-django-cli",children:"Use the django CLI"}),(0,i.jsxs)(n.p,{children:["Django is the framework we use for serving the website, and it has many different commands.\nAll commands must be executed from the python virtuel environment, with the command\n",(0,i.jsx)(n.code,{children:"python3 manage.py"}),". So you have 3 different ways to do this:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Open the virtual environement, execute your command, and close the virtual environement:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pipenv shell\npython3 manage.py <command>\nexit\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Or"})," you can execute use the single-command execution of pipenv:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pipenv run python3 manage.py <command>\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Or"}),", if you are as lazy as us, you can use the shortcut we have defined to go faster:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pipenv run django <command>\n"})}),"\n"]}),"\n"]}),(0,i.jsx)(n.h3,{id:"useful-django-commands",children:"Useful django commands"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run django runserver"}),": Launch the server. When you edit the code of the backend,\nit automatically update the server. You can also use ",(0,i.jsx)(n.code,{children:"pipenv run start"})," which does the same."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run django makemigrations"}),": create the migration files. You have to run it every time\nyou change the structure of the database (in the ",(0,i.jsx)(n.code,{children:"models.py"})," files)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run django migrate"}),": apply the previous migrations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run django test"}),": run the tests of django"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run django startapp"}),": create a new application"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pipenv run django createsuperuser"}),": create a user with admin rights"]}),"\n"]}),(0,i.jsxs)(n.p,{children:["You can find all commands on the ",(0,i.jsx)(n.a,{href:"https://docs.djangoproject.com/fr/4.0/ref/django-admin/",children:"Django documentation"}),"."]})]}),"\n",(0,i.jsx)(n.h2,{id:"the-front-end",children:"The Front End"}),"\n",(0,i.jsx)(n.p,{children:"The front end is a react application. The main commands you will have to use:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm i"})," or ",(0,i.jsx)(n.code,{children:"npm install"}),": install all the dependencies (or update them), including\nthe dev ones."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run start"}),": start the live compilation in dev mode of the files. Each time you edit\na file, the new file is automatically compiled. Note that you need to refresh\nyour browser to take the changes into effect."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run build"}),": build the production compilation of the files. This is useful to check\nthe weight of the files."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Then we also have the testing commands:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run types"}),": check the typescript types of your files!"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run lint"}),": run eslint and prettier on all of your files to check for code smells"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run jest"}),": run all the unit tests of the front end with jest","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run jest <filename>"}),": run the unit tests of a specific file"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run jest:u"}),": update the snapshots of the unit tests"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"npm run test"}),": run all of these 3 commands at once!"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>r,a:()=>l});var i=s(7294);const t={},d=i.createContext(t);function l(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);