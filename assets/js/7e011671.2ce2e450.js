"use strict";(self.webpackChunknantralplatform_docs=self.webpackChunknantralplatform_docs||[]).push([[4437],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>f});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),m=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=m(a),u=r,f=c["".concat(s,".").concat(u)]||c[u]||d[u]||i;return a?n.createElement(f,l(l({ref:t},p),{},{components:a})):n.createElement(f,l({ref:t},p))}));function f(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:r,l[1]=o;for(var m=2;m<i;m++)l[m]=a[m];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},2063:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>m});var n=a(7462),r=(a(7294),a(3905));const i={description:"A comprehensive description of how mails are handled on the server",last_update:{date:"2023-10-20 10:06:28 +0200",author:"Alexis Delage"}},l="Email server",o={unversionedId:"dev/admin/emails",id:"dev/admin/emails",title:"Email server",description:"A comprehensive description of how mails are handled on the server",source:"@site/docs/dev/admin/emails.md",sourceDirName:"dev/admin",slug:"/dev/admin/emails",permalink:"/dev/admin/emails",draft:!1,editUrl:"https://github.com/3cn-ecn/nantralPlatform/tree/master/docs/docs/dev/admin/emails.md",tags:[],version:"current",lastUpdatedBy:"Alexis Delage",lastUpdatedAt:1697789188,formattedLastUpdatedAt:"Oct 20, 2023",frontMatter:{description:"A comprehensive description of how mails are handled on the server",last_update:{date:"2023-10-20 10:06:28 +0200",author:"Alexis Delage"}},sidebar:"sidebar",previous:{title:"Debugging in production",permalink:"/dev/admin/debugging"},next:{title:"List of websites",permalink:"/dev/admin/website-list"}},s={},m=[{value:"Accessing the webmail",id:"accessing-the-webmail",level:2},{value:"Accessing the webmail administration page",id:"accessing-the-webmail-administration-page",level:2},{value:"Architecture details",id:"architecture-details",level:2}],p={toc:m},c="wrapper";function d(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"email-server"},"Email server"),(0,r.kt)("p",null,"To be able to send and receive emails with the ",(0,r.kt)("inlineCode",{parentName:"p"},"@nantral-platform.fr")," domain,\nwe need an email server. This server runs on the same server as the Nantral\nPlatform website."),(0,r.kt)("h2",{id:"accessing-the-webmail"},"Accessing the webmail"),(0,r.kt)("p",null,"The webmail is available at ",(0,r.kt)("a",{parentName:"p",href:"https://webmail.nantral-platform.fr/"},(0,r.kt)("inlineCode",{parentName:"a"},"https://webmail.nantral-platform.fr/")),". There are currently 3 email accounts:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"mailto:contact@nantral-platform.fr"},"contact@nantral-platform.fr")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"mailto:group-manager@nantral-platform.fr"},"group-manager@nantral-platform.fr")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"mailto:admin@nantral-platform.fr"},"admin@nantral-platform.fr"))),(0,r.kt)("h2",{id:"accessing-the-webmail-administration-page"},"Accessing the webmail administration page"),(0,r.kt)("p",null,"The webmail administration page is available at ",(0,r.kt)("a",{parentName:"p",href:"https://webmail.nantral-platform.fr/admin"},(0,r.kt)("inlineCode",{parentName:"a"},"https://webmail.nantral-platform.fr/admin"))," with the ",(0,r.kt)("inlineCode",{parentName:"p"},"admin@nantral-platform.fr")," email."),(0,r.kt)("p",null,"To manage the accounts, you can login into this interface and go to ",(0,r.kt)("inlineCode",{parentName:"p"},"domains -> users (mail icon)"),"."),(0,r.kt)("p",null,"Detailed administration on this interface is available ",(0,r.kt)("a",{parentName:"p",href:"https://mailu.io/1.9/webadministration.html"},"on the Mailu website"),"."),(0,r.kt)("h2",{id:"architecture-details"},"Architecture details"),(0,r.kt)("p",null,"We use ",(0,r.kt)("a",{parentName:"p",href:"https://mailu.io/"},"Mailu 1.9")," with Docker to handle our emails. This includes the following Docker containers:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"front"),(0,r.kt)("li",{parentName:"ul"},"resolver"),(0,r.kt)("li",{parentName:"ul"},"admin"),(0,r.kt)("li",{parentName:"ul"},"imap"),(0,r.kt)("li",{parentName:"ul"},"smtp"),(0,r.kt)("li",{parentName:"ul"},"antispam"),(0,r.kt)("li",{parentName:"ul"},"fetchmail"),(0,r.kt)("li",{parentName:"ul"},"webmail")),(0,r.kt)("p",null,"The SSL certificates are the ones used by our entire platform. We pass them to the container ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/3cn-ecn/nantralPlatform/blob/da9649ad35d4379293d7ee0dbc6e921c490596dd/deployment/certbot-renew.sh#L27-L28"},"when they are updated with Certbot")," and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/3cn-ecn/nantralPlatform/blob/da9649ad35d4379293d7ee0dbc6e921c490596dd/.github/workflows/deploy.yml#L139-L140"},"during deployment"),"."),(0,r.kt)("p",null,"The emails and accounts are stored on our Postgresql database."),(0,r.kt)("p",null,"There is no authentification between Django and the SMTP server as they both operate on the same host. This means that any email adress ending in ",(0,r.kt)("inlineCode",{parentName:"p"},"@nantral-platform.fr")," is valid (",(0,r.kt)("inlineCode",{parentName:"p"},"foo@nantral-platform.fr"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"bar@nantral-platform.fr"),", etc). You do not need to create it in order to use it."))}d.isMDXComponent=!0}}]);