"use strict";(self.webpackChunknantralplatform_docs=self.webpackChunknantralplatform_docs||[]).push([[8670],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return c}});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=s(a),c=i,h=m["".concat(p,".").concat(c)]||m[c]||d[c]||r;return a?n.createElement(h,l(l({ref:t},u),{},{components:a})):n.createElement(h,l({ref:t},u))}));function c(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=m;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var s=2;s<r;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2360:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(7294),i=a(6010),r="tabItem_OmH5";function l(e){var t=e.children,a=e.hidden,l=e.className;return n.createElement("div",{role:"tabpanel",className:(0,i.Z)(r,l),hidden:a},t)}},9877:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(7462),i=a(7294),r=a(2389),l=a(7392),o=a(7094),p=a(2466),s=a(6010),u="tabList_uSqn",d="tabItem_LplD";function m(e){var t,a,r,m=e.lazy,c=e.block,h=e.defaultValue,v=e.values,k=e.groupId,N=e.className,y=i.Children.map(e.children,(function(e){if((0,i.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),f=null!=v?v:y.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),g=(0,l.l)(f,(function(e,t){return e.value===t.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var b=null===h?h:null!=(t=null!=h?h:null==(a=y.find((function(e){return e.props.default})))?void 0:a.props.value)?t:null==(r=y[0])?void 0:r.props.value;if(null!==b&&!f.some((function(e){return e.value===b})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+b+'" but none of its children has the corresponding value. Available values are: '+f.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,o.U)(),C=w.tabGroupChoices,T=w.setTabGroupChoices,j=(0,i.useState)(b),x=j[0],I=j[1],S=[],O=(0,p.o5)().blockElementScrollPositionUntilNextRender;if(null!=k){var P=C[k];null!=P&&P!==x&&f.some((function(e){return e.value===P}))&&I(P)}var _=function(e){var t=e.currentTarget,a=S.indexOf(t),n=f[a].value;n!==x&&(O(t),I(n),null!=k&&T(k,n))},D=function(e){var t,a=null;switch(e.key){case"ArrowRight":var n=S.indexOf(e.currentTarget)+1;a=S[n]||S[0];break;case"ArrowLeft":var i=S.indexOf(e.currentTarget)-1;a=S[i]||S[S.length-1]}null==(t=a)||t.focus()};return i.createElement("div",{className:(0,s.Z)("tabs-container",u)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":c},N)},f.map((function(e){var t=e.value,a=e.label,r=e.attributes;return i.createElement("li",(0,n.Z)({role:"tab",tabIndex:x===t?0:-1,"aria-selected":x===t,key:t,ref:function(e){return S.push(e)},onKeyDown:D,onFocus:_,onClick:_},r,{className:(0,s.Z)("tabs__item",d,null==r?void 0:r.className,{"tabs__item--active":x===t})}),null!=a?a:t)}))),m?(0,i.cloneElement)(y.filter((function(e){return e.props.value===x}))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},y.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==x})}))))}function c(e){var t=(0,r.Z)();return i.createElement(m,(0,n.Z)({key:String(t)},e))}},6096:function(e,t,a){a.r(t),a.d(t,{assets:function(){return m},contentTitle:function(){return u},default:function(){return v},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return c}});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),l=a(9877),o=a(2360),p=["components"],s={title:"Set up Django",sidebar_position:4},u="Setup Django",d={unversionedId:"get-started/setup-django",id:"get-started/setup-django",title:"Set up Django",description:"Now that your computer is ready, let's start with django! Be sure you installed all the programs before",source:"@site/docs/get-started/setup-django.md",sourceDirName:"get-started",slug:"/get-started/setup-django",permalink:"/docs/get-started/setup-django",draft:!1,editUrl:"https://github.com/nantral-platform/nantralPlatform/tree/master/docs/docs/get-started/setup-django.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Set up Django",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Make your first commit",permalink:"/docs/get-started/first-commit"},next:{title:"Set up React",permalink:"/docs/get-started/setup-react"}},m={},c=[{value:"Create a virtual environment",id:"create-a-virtual-environment",level:2},{value:"Create the <em>.env</em> file",id:"create-the-env-file",level:2},{value:"5. Compiling the React code",id:"5-compiling-the-react-code",level:2},{value:"6. Running the backend",id:"6-running-the-backend",level:2},{value:"1. Launch the server",id:"1-launch-the-server",level:2},{value:"2. Pull last updates",id:"2-pull-last-updates",level:2},{value:"3. Migrations",id:"3-migrations",level:2},{value:"4. Creating a new server app",id:"4-creating-a-new-server-app",level:2},{value:"5. Developp the frontend",id:"5-developp-the-frontend",level:2},{value:"6. Manage your virtualenv",id:"6-manage-your-virtualenv",level:2},{value:"a) Create a virtualenv",id:"a-create-a-virtualenv",level:3},{value:"b) Activate a virtualenv",id:"b-activate-a-virtualenv",level:3},{value:"Activate a virtualenv {.tabset}",id:"activate-a-virtualenv-tabset",level:4},{value:"MacOS/Linux",id:"macoslinux",level:5},{value:"Windows (with CMD)",id:"windows-with-cmd",level:5},{value:"Windows (with Powershell)",id:"windows-with-powershell",level:5},{value:"c) Deactivate a virtualenv",id:"c-deactivate-a-virtualenv",level:3},{value:"d) Alternative: virtualenvwrapper",id:"d-alternative-virtualenvwrapper",level:3}],h={toc:c};function v(e){var t=e.components,a=(0,i.Z)(e,p);return(0,r.kt)("wrapper",(0,n.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"setup-django"},"Setup Django"),(0,r.kt)("p",null,"Now that your computer is ready, let's start with django! Be sure you installed all the programs before\n(see ",(0,r.kt)("a",{parentName:"p",href:"/docs/get-started/install-party"},"Install Party"),") and set up them (see ",(0,r.kt)("a",{parentName:"p",href:"/docs/get-started/setup-project"},"Set up the project"),")."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"In this tutorial, we will use the ",(0,r.kt)("inlineCode",{parentName:"p"},"python3")," command for python. You might need to replace it by ",(0,r.kt)("inlineCode",{parentName:"p"},"python"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"py"),",\nor ",(0,r.kt)("inlineCode",{parentName:"p"},"py -3")," (see the ",(0,r.kt)("a",{parentName:"p",href:"/docs/get-started/install-party#python"},"Python Installation"),").\nThe same thing applies to the ",(0,r.kt)("inlineCode",{parentName:"p"},"pip")," command (see the ",(0,r.kt)("a",{parentName:"p",href:"/docs/get-started/install-party#pip"},"Pip Installation"),")."),(0,r.kt)("p",{parentName:"div"},"We also suppose that you know how to use a terminal and espacially how to change the directory. If it is not the case,\nyou can read the introduction of the ",(0,r.kt)("a",{parentName:"p",href:"/docs/get-started/install-party"},"Install Party"),"."))),(0,r.kt)("h2",{id:"create-a-virtual-environment"},"Create a virtual environment"),(0,r.kt)(l.Z,{groupId:"os",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"win",label:"Windows",mdxType:"TabItem"},(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"In VSCode, click on the ",(0,r.kt)("strong",{parentName:"li"},"Terminal")," tab, then on ",(0,r.kt)("strong",{parentName:"li"},"New Terminal"),"."),(0,r.kt)("li",{parentName:"ol"},"In the terminal, change your directory to the ",(0,r.kt)("strong",{parentName:"li"},"backend")," directory:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd backend\n"))),(0,r.kt)("li",{parentName:"ol"},"Create a virtualenv named ",(0,r.kt)("inlineCode",{parentName:"li"},"env")," by running:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"python3 -m virtualenv env\n"))),(0,r.kt)("li",{parentName:"ol"},"Activate the virtulenv:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"If you use CMD, run",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"env\\Scripts\\activate.bat\n"))),(0,r.kt)("li",{parentName:"ul"},"If you use Powershell, run",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"env\\Scripts\\activate.ps1\n")),(0,r.kt)("em",{parentName:"li"},"If you have an error, run ",(0,r.kt)("inlineCode",{parentName:"em"},"Set-ExecutionPolicy -ExecutionPolicy Unrestricted -Scope CurrentUser"),"."))))),(0,r.kt)("div",{className:"admonition admonition-success alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Check the activation")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If the activation succeds, you will notice a ",(0,r.kt)("inlineCode",{parentName:"p"},"(env)")," indicator at the beginning of the command prompt."))),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Install all the dependencies of the nantral platform project:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pip install -r requirements.txt\n"))),(0,r.kt)("li",{parentName:"ol"},"Create the database:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"python3 manage.py migrate\n")))),(0,r.kt)("p",null,"If you don't see any errors, you're done. Congratulations! \ud83e\udd73 You can move on to the next step.")),(0,r.kt)(o.Z,{value:"mac-lin",label:"MacOS/Linux",mdxType:"TabItem"},(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"For more advanced users")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You can skip all the following steps by using the ",(0,r.kt)("inlineCode",{parentName:"p"},"install.sh")," script in the ",(0,r.kt)("inlineCode",{parentName:"p"},"backend")," directory.\nIt will execute for you all of the following steps to create the virtual environment.\nTo achieve this, open a new terminal in VS Code, and run"),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd backend/ && ./install.sh\n")),(0,r.kt)("p",{parentName:"div"},"The virtualenv should be activated at the end of the script."))),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"In VSCode, click on the ",(0,r.kt)("strong",{parentName:"li"},"Terminal")," tab, then on ",(0,r.kt)("strong",{parentName:"li"},"New Terminal"),"."),(0,r.kt)("li",{parentName:"ol"},"In the terminal, change your directory to the ",(0,r.kt)("strong",{parentName:"li"},"backend")," directory:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd backend\n"))),(0,r.kt)("li",{parentName:"ol"},"Create a virtualenv named ",(0,r.kt)("inlineCode",{parentName:"li"},"env")," by running:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"python3 -m virtualenv env\n"))),(0,r.kt)("li",{parentName:"ol"},"Activate the virtulenv:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"source env/scripts/activate\n")),(0,r.kt)("div",{parentName:"li",className:"admonition admonition-success alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Check the activation")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"If the activation succeds, you will notice a ",(0,r.kt)("inlineCode",{parentName:"p"},"(env)")," indicator at the beginning of the command prompt.")))),(0,r.kt)("li",{parentName:"ol"},"Install all the dependencies of the nantral platform project:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pip install -r requirements.txt\n"))),(0,r.kt)("li",{parentName:"ol"},"Create the database:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"python3 manage.py migrate\n")))),(0,r.kt)("p",null,"If you don't see any errors, you're done. Congratulations! \ud83e\udd73 You can move on to the next step."))),(0,r.kt)("h2",{id:"create-the-env-file"},"Create the ",(0,r.kt)("em",{parentName:"h2"},".env")," file"),(0,r.kt)("p",null,"On the server, we need some passwords in our code. But for security issues, these passwords can't be synchronized on\nGithub. That's why you have to add these settings yourself, with your own passwords. Don't panic if you don't have ones:\nyou can let them blank if you do not want to developp the corresponding functions."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"In VSCode, create a new file named ",(0,r.kt)("inlineCode",{parentName:"li"},".env")," inside the folder ",(0,r.kt)("inlineCode",{parentName:"li"},"backend/config/settings"),"."),(0,r.kt)("li",{parentName:"ol"},"Inside it, copy and paste the content of the ",(0,r.kt)("inlineCode",{parentName:"li"},".env.example")," file located in ",(0,r.kt)("inlineCode",{parentName:"li"},"backend/config/settings"),".")),(0,r.kt)("h2",{id:"5-compiling-the-react-code"},"5. Compiling the React code"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Inside VSCode, open another terminal using the ",(0,r.kt)("em",{parentName:"li"},"Terminal")," tab."),(0,r.kt)("li",{parentName:"ol"},"In this terminal, type ",(0,r.kt)("inlineCode",{parentName:"li"},"cd frontend")," to change your directory to the ",(0,r.kt)("inlineCode",{parentName:"li"},"frontend")," directory."),(0,r.kt)("li",{parentName:"ol"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"npm install")," to install dependencies. This might take a minute."),(0,r.kt)("li",{parentName:"ol"},"Then run ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run dev")," to compile the code into the ",(0,r.kt)("inlineCode",{parentName:"li"},"backend/static/js")," folder."),(0,r.kt)("li",{parentName:"ol"},"If you don't see any errors, you can close the terminal.")),(0,r.kt)("h2",{id:"6-running-the-backend"},"6. Running the backend"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go back to the VScode terminal in the ",(0,r.kt)("inlineCode",{parentName:"li"},"backend")," folder."),(0,r.kt)("li",{parentName:"ol"},"Your virtualenv should have automatically been activated (notice the ",(0,r.kt)("inlineCode",{parentName:"li"},"(env)")," at the far left of the command prompt). If you don't see it, activate your virtualenv using the instructions in the dedicated section at the end of this page."),(0,r.kt)("li",{parentName:"ol"},"Create an administrator account with ",(0,r.kt)("inlineCode",{parentName:"li"},"python3 manage.py createsuperuser"),"."),(0,r.kt)("li",{parentName:"ol"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"python3 manage.py runserver"),"."),(0,r.kt)("li",{parentName:"ol"},"Congratulations ! You can now access the website at ",(0,r.kt)("a",{parentName:"li",href:"http://localhost:8000"},"http://localhost:8000")," \ud83e\udd73"),(0,r.kt)("li",{parentName:"ol"},"Press ",(0,r.kt)("kbd",null,"CTRL")," + ",(0,r.kt)("kbd",null,"C")," in the terminal to stop the backend.")),(0,r.kt)("h1",{id:"commands-you-will-use-everyday"},"Commands you will use everyday"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Now that Nantral Platform development environment is installed, we'll take a closer look to the commands you will have to use each time you developp something on the application.")),(0,r.kt)("h2",{id:"1-launch-the-server"},"1. Launch the server"),(0,r.kt)("p",null,"Suppose that during your coffee break, Windows made an update an restarted your computer. How to run the server again whitout reinstalling erveything like above ?"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"If you use Github Desktop, open it, then open the repository in VScode. Else, directly open the directory in VScode."),(0,r.kt)("li",{parentName:"ol"},"Open a new terminal in VScode if there is no one (",(0,r.kt)("em",{parentName:"li"},"Terminal")," tab > ",(0,r.kt)("em",{parentName:"li"},"New terminal"),")"),(0,r.kt)("li",{parentName:"ol"},"Go into the ",(0,r.kt)("inlineCode",{parentName:"li"},"backend")," folder with ",(0,r.kt)("inlineCode",{parentName:"li"},"cd")," command"),(0,r.kt)("li",{parentName:"ol"},"Activate your virtualenv (see the dedicated section below, at the end)"),(0,r.kt)("li",{parentName:"ol"},"Visit your local website at ",(0,r.kt)("a",{parentName:"li",href:"http://localhost:8000"},"http://localhost:8000"),", or shutdown the server with ",(0,r.kt)("kbd",null,"CTRL")," + ",(0,r.kt)("kbd",null,"C"),".")),(0,r.kt)("h2",{id:"2-pull-last-updates"},"2. Pull last updates"),(0,r.kt)("p",null,"When someone else make some updates, you make a ",(0,r.kt)("inlineCode",{parentName:"p"},"pull")," with git to update your local copy of nantral platform (e.g. with Github Desktop, or git in VScode, or git in command line). When you pull last updates, you will probably have to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"update your python dependencies:")," in the ",(0,r.kt)("inlineCode",{parentName:"li"},"backend")," folder, run ",(0,r.kt)("inlineCode",{parentName:"li"},"pip3 install -r requirements.txt")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"update your database:")," in the ",(0,r.kt)("inlineCode",{parentName:"li"},"backend")," folder, run ",(0,r.kt)("inlineCode",{parentName:"li"},"python3 manage.py migrate")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"update your React dependencies:")," in the ",(0,r.kt)("inlineCode",{parentName:"li"},"frontend")," folder, run ",(0,r.kt)("inlineCode",{parentName:"li"},"npm install")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"update your compiled React files:")," in the ",(0,r.kt)("inlineCode",{parentName:"li"},"frontend")," folder, run ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run dev"))),(0,r.kt)("h2",{id:"3-migrations"},"3. Migrations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Whenever you make a change to your database's structure (basically each time you modify one of the ",(0,r.kt)("inlineCode",{parentName:"li"},"models.py")," file), you need to save the modifications of your database in a file so as to other users can know the database modifications. In the ",(0,r.kt)("inlineCode",{parentName:"li"},"backend")," folder, run ",(0,r.kt)("inlineCode",{parentName:"li"},"python3 manage.py makemigrations")," to automatically create these files"),(0,r.kt)("li",{parentName:"ul"},"Then, you can apply these modifications to your own database by running ",(0,r.kt)("inlineCode",{parentName:"li"},"python3 manage.py migrate"))),(0,r.kt)("p",null,"Some good practices:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The migration files are saved in the ",(0,r.kt)("inlineCode",{parentName:"li"},"migrations")," folder in each app. Try to rename the migrations scripts to something more understandable for a human. Example : rename ",(0,r.kt)("inlineCode",{parentName:"li"},"migration01.py")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"create_news_model_alter_clubs.py")),(0,r.kt)("li",{parentName:"ul"},"Try also to merge migrations into one migration as much as possible."),(0,r.kt)("li",{parentName:"ul"},"Be careful: you can't change your migration files once you migrate your database. If you want to merge them before pushing your updates to the server for example, you'll have to destroy your database (simply delete the ",(0,r.kt)("inlineCode",{parentName:"li"},"db.sqlite3")," file).")),(0,r.kt)("h2",{id:"4-creating-a-new-server-app"},"4. Creating a new server app"),(0,r.kt)("p",null,'In django, all functionnalities are separeted in "apps". Each "app" correspond to a directory in the ',(0,r.kt)("inlineCode",{parentName:"p"},"server/apps")," folder."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"To create a new app in the django server, use ",(0,r.kt)("inlineCode",{parentName:"li"},"python manage.py startapp app_name"),". This will create a new folder with the app name you chose."),(0,r.kt)("li",{parentName:"ul"},"Then move the app folder to the main ",(0,r.kt)("inlineCode",{parentName:"li"},"apps")," folder, so as to have all apps in the same place."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"In your new app folder:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Create or update a ",(0,r.kt)("inlineCode",{parentName:"li"},"urls.py")," script inside the folder. Base this script on other ",(0,r.kt)("inlineCode",{parentName:"li"},"urls.py")," you can find in other apps"),(0,r.kt)("li",{parentName:"ul"},"Update the ",(0,r.kt)("inlineCode",{parentName:"li"},"apps.py")," script, by replacing ",(0,r.kt)("inlineCode",{parentName:"li"},"name = 'app_name'")," by ",(0,r.kt)("inlineCode",{parentName:"li"},"name = 'apps.app_name'")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Then in the ",(0,r.kt)("inlineCode",{parentName:"strong"},"server/config")," folder:"),(0,r.kt)("em",{parentName:"li"}," In the ",(0,r.kt)("inlineCode",{parentName:"em"},"urls.py")," script, add a namespace for your app like this: ",(0,r.kt)("inlineCode",{parentName:"em"},"url('app_name/', include('apps.app_name.urls', namespace='app_name')),"),". This will link the url router to your urls.py script in the app you created.\n")," Finally add the app in ",(0,r.kt)("inlineCode",{parentName:"li"},"settings/base.py"),":\n",(0,r.kt)("inlineCode",{parentName:"li"},"COMMON_APPS = [ 'apps.app_name', ]"),"\nSome defaults tables have been added in your database: run the migrations (see section 3), and then run the server!")),(0,r.kt)("h2",{id:"5-developp-the-frontend"},"5. Developp the frontend"),(0,r.kt)("p",null,"For the frontend part, all informations are explained on the dedicated page: ",(0,r.kt)("a",{parentName:"p",href:"../setup-react"},"Frontend with React"),"."),(0,r.kt)("h2",{id:"6-manage-your-virtualenv"},"6. Manage your virtualenv"),(0,r.kt)("p",null,"A virtualenv allow you to have certain requirements versions for a project which are differents from the ones you have on your computer."),(0,r.kt)("h3",{id:"a-create-a-virtualenv"},"a) Create a virtualenv"),(0,r.kt)("p",null,"First you have to enable the functionnality by installing the package ",(0,r.kt)("inlineCode",{parentName:"p"},"virtualenv")," whith pip: ",(0,r.kt)("inlineCode",{parentName:"p"},"python3 -m pip install virtualenv"),". Then you can create a virtualenv in a folder by running ",(0,r.kt)("inlineCode",{parentName:"p"},"python3 -m virtualenv env"),", where ",(0,r.kt)("inlineCode",{parentName:"p"},"env")," is your virtualenv name. For this project, we create the virtualenv in the ",(0,r.kt)("inlineCode",{parentName:"p"},"server")," directory."),(0,r.kt)("h3",{id:"b-activate-a-virtualenv"},"b) Activate a virtualenv"),(0,r.kt)("p",null,"You need to activate your virtualenv before doing anything using Python about the project. Once the virtualenv is activated, you will notice the ",(0,r.kt)("inlineCode",{parentName:"p"},"(env)")," at the far left of the command prompt."),(0,r.kt)("h4",{id:"activate-a-virtualenv-tabset"},"Activate a virtualenv {.tabset}"),(0,r.kt)("h5",{id:"macoslinux"},"MacOS/Linux"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Go to the folder which contains your virtualenv: ",(0,r.kt)("inlineCode",{parentName:"li"},"cd backend")),(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"source env/bin/activate"))),(0,r.kt)("h5",{id:"windows-with-cmd"},"Windows (with CMD)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Go to the folder which contains your virtualenv: ",(0,r.kt)("inlineCode",{parentName:"li"},"cd backend")),(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"env\\Scripts\\activate.bat"))),(0,r.kt)("h5",{id:"windows-with-powershell"},"Windows (with Powershell)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Go to the folder which contains your virtualenv: ",(0,r.kt)("inlineCode",{parentName:"li"},"cd backend")),(0,r.kt)("li",{parentName:"ul"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"env\\Scripts\\activate.ps1"))),(0,r.kt)("h3",{id:"c-deactivate-a-virtualenv"},"c) Deactivate a virtualenv"),(0,r.kt)("p",null,"Close your virtualenv with ",(0,r.kt)("inlineCode",{parentName:"p"},"deactivate")," anywhere."),(0,r.kt)("h3",{id:"d-alternative-virtualenvwrapper"},"d) Alternative: virtualenvwrapper"),(0,r.kt)("p",null,"Alternatively, you can use ",(0,r.kt)("inlineCode",{parentName:"p"},"virtualenvwrapper")," to easily manage several virtualenv. Follow the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/development_environment#using_django_inside_a_python_virtual_environment"},"instructions here")," to install it. Once installed, you can use:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mkvirtualenv env_name")," to create a virtual env"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"workon env_name")," to activate a virtual env (it doesn't depends on the current folder you're in)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"deactivate")," to close the virtual env")),(0,r.kt)("p",null,"Since the installation is a little more tricky, we do not recommand this for beginners; however, if you succeed to install it before (for example doing the MDN tutorial), you can use it if you prefere."))}v.isMDXComponent=!0}}]);