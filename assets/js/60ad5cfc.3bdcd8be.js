"use strict";(self.webpackChunknantralplatform_docs=self.webpackChunknantralplatform_docs||[]).push([[4e3],{2638:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>u});var t=a(5893),s=a(1151),r=a(4866),i=a(5162);const l={sidebar_position:5},d="Manage dependencies",c={id:"dev/advanced-guides/dependencies",title:"Manage dependencies",description:"A little discussion about the nightmare of all developers...",source:"@site/docs/dev/advanced-guides/dependencies.md",sourceDirName:"dev/advanced-guides",slug:"/dev/advanced-guides/dependencies",permalink:"/dev/advanced-guides/dependencies",draft:!1,unlisted:!1,editUrl:"https://github.com/3cn-ecn/nantralPlatform/tree/master/docs/docs/dev/advanced-guides/dependencies.md",tags:[],version:"current",lastUpdatedBy:"Alexis Delage",lastUpdatedAt:1697118490,formattedLastUpdatedAt:"Oct 12, 2023",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"sidebar",previous:{title:"Docker",permalink:"/dev/advanced-guides/docker"},next:{title:"Administrator Guides",permalink:"/dev/admin/"}},o={},u=[{value:"Generalities",id:"generalities",level:2},{value:"Add Dependencies",id:"add-dependencies",level:2},{value:"Update Dependencies",id:"update-dependencies",level:2},{value:"See outdated dependencies",id:"see-outdated-dependencies",level:2},{value:"Security issues",id:"security-issues",level:2}];function p(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"manage-dependencies",children:"Manage dependencies"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"A little discussion about the nightmare of all developers..."})}),"\n",(0,t.jsxs)(n.p,{children:["To manage our dependencies, we will use a little program called a ",(0,t.jsx)(n.strong,{children:"package manager"}),":\nit will try to find the best dependencies versions for each of our dependency\nto avoid any issue and incompatibility between each library."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Pipenv"}),": a package manager for ",(0,t.jsx)(n.em,{children:"Python"}),", used for the Django back end."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"NPM"}),": a package manager for ",(0,t.jsx)(n.em,{children:"Node.js"}),", used for the React front end and the documentation website."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"generalities",children:"Generalities"}),"\n",(0,t.jsx)(n.p,{children:"For each package manager, there are two files:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["the config file (",(0,t.jsx)(n.code,{children:"Pipfile"})," for pipenv and ",(0,t.jsx)(n.code,{children:"package.json"})," for npm);"]}),"\n",(0,t.jsxs)(n.li,{children:["the lock file (",(0,t.jsx)(n.code,{children:"Pipfile.lock"})," for pipenv and ",(0,t.jsx)(n.code,{children:"package-lock.json"})," for npm)."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The config file is used to list the dependencies needed for the project,\nand which versions of each package are required. Then, the package manager\nwill take this config to find all the dependencies and sub-dependencies of each\npackage, and try to find the latest version of each package which is compatible\nwith all the other packages. Once this problem is solved, it will the list of\nall packages and their exact version into the lock file."}),"\n",(0,t.jsx)(n.h2,{id:"add-dependencies",children:"Add Dependencies"}),"\n",(0,t.jsxs)(r.Z,{groupId:"package-manager",children:[(0,t.jsxs)(i.Z,{value:"pipenv",label:"Pipenv",children:[(0,t.jsx)(n.p,{children:"Add a dependency:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pipenv install <package_name>\n"})}),(0,t.jsx)(n.p,{children:"Add a dev dependency (i.e. a package used for devs only):"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pipenv install --dev <package_name>\n"})}),(0,t.jsx)(n.p,{children:"Remove a dependency:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pipenv uninstall <package_name>\n"})})]}),(0,t.jsxs)(i.Z,{value:"npm",label:"NPM",children:[(0,t.jsx)(n.p,{children:"Add a dependency:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install --save <package_name>\n"})}),(0,t.jsx)(n.p,{children:"Add a dev dependency (i.e. a package used for devs only):"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev <package_name>\n"})}),(0,t.jsx)(n.p,{children:"Remove a dependency:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm uninstall <package_name>\n"})})]})]}),"\n",(0,t.jsxs)(n.admonition,{type:"danger",children:[(0,t.jsx)(n.p,{children:"Always add the less number of dependencies possible! There are two reasons for this:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The packages can be ",(0,t.jsx)(n.strong,{children:"not compatible"})," between each other"]}),"\n",(0,t.jsxs)(n.li,{children:["For the React front end: the user will download all dependencies when he visits\nthe website, so ",(0,t.jsx)(n.strong,{children:"less dependencies = faster navigation"}),"!"]}),"\n"]})]}),"\n",(0,t.jsx)(n.h2,{id:"update-dependencies",children:"Update Dependencies"}),"\n",(0,t.jsxs)(n.p,{children:["After you edit the ",(0,t.jsx)(n.strong,{children:"config file"}),", or when the last update was too old and you\nneed to update your packages, you have to update the ",(0,t.jsx)(n.strong,{children:"lock file"})," with the last\nversions to correct security issues for example."]}),"\n",(0,t.jsx)(n.admonition,{title:"Warning",type:"caution",children:(0,t.jsxs)(n.p,{children:["This command will only update the ",(0,t.jsx)(n.strong,{children:"lock file"}),", but not the ",(0,t.jsx)(n.strong,{children:"config file"}),":\nif you set an old version of a package in your config\nfile, it will keep the old version to respect the config file."]})}),"\n",(0,t.jsxs)(r.Z,{groupId:"package-manager",children:[(0,t.jsx)(i.Z,{value:"pipenv",label:"Pipenv",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pipenv update --dev\n"})})}),(0,t.jsx)(i.Z,{value:"npm",label:"NPM",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm update\n"})})})]}),"\n",(0,t.jsx)(n.h2,{id:"see-outdated-dependencies",children:"See outdated dependencies"}),"\n",(0,t.jsxs)(n.p,{children:["Since the ",(0,t.jsx)(n.code,{children:"update"})," command does not really update all the packages, we need\na command to see the outdated packages. The output of the command will tell\nyou if you can update directly a package with an ",(0,t.jsx)(n.code,{children:"update"})," command, or if you\nneed to edit the config file before."]}),"\n",(0,t.jsxs)(r.Z,{groupId:"package-manager",children:[(0,t.jsx)(i.Z,{value:"pipenv",label:"Pipenv",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pipenv update --outdated\n"})})}),(0,t.jsx)(i.Z,{value:"npm",label:"NPM",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm outdated\n"})})})]}),"\n",(0,t.jsx)(n.h2,{id:"security-issues",children:"Security issues"}),"\n",(0,t.jsx)(n.p,{children:"Sometimes, one of your dependencies has a security issue. In this case,\nyou need to update it as soon as possible to prevent any security issue in your\nproject."}),"\n",(0,t.jsx)(n.p,{children:"There are 3 cases:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"A patch has been released and you can update the package"}),": you're fine,\njust do the update!"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"A patch has been released but you have other dependencies that use this\npackage and they did not update yet"}),": wait a little bit that the parent\npackage update its dependencies, and then see case n\xb01. If a package takes\ntoo much time to update its dependencies, then see n\xb03."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"No patch has been released"}),": you'll have a lot of work to do, sorry \ud83d\ude22\nYou need to remove this dependency from your project, and try to find\nanother one that can replace the package."]}),"\n"]}),"\n",(0,t.jsxs)(r.Z,{groupId:"package-manager",children:[(0,t.jsxs)(i.Z,{value:"pipenv",label:"Pipenv",children:[(0,t.jsx)(n.p,{children:"To see all the security issues:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pipenv check\n"})})]}),(0,t.jsxs)(i.Z,{value:"npm",label:"NPM",children:[(0,t.jsx)(n.p,{children:"To see all the security issues:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm audit\n"})})]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},5162:(e,n,a)=>{a.d(n,{Z:()=>i});a(7294);var t=a(512);const s={tabItem:"tabItem_Ymn6"};var r=a(5893);function i(e){let{children:n,hidden:a,className:i}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,t.Z)(s.tabItem,i),hidden:a,children:n})}},4866:(e,n,a)=>{a.d(n,{Z:()=>k});var t=a(7294),s=a(512),r=a(2466),i=a(6550),l=a(469),d=a(1980),c=a(7392),o=a(12);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:a}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:a,attributes:t,default:s}}=e;return{value:n,label:a,attributes:t,default:s}}))}(a);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function h(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:a}=e;const s=(0,i.k6)(),r=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:n,groupId:a});return[(0,d._X)(r),(0,t.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(s.location.search);n.set(r,e),s.replace({...s.location,search:n.toString()})}),[r,s])]}function g(e){const{defaultValue:n,queryString:a=!1,groupId:s}=e,r=p(e),[i,d]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=a.find((e=>e.default))??a[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r}))),[c,u]=m({queryString:a,groupId:s}),[g,f]=function(e){let{groupId:n}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,r]=(0,o.Nk)(a);return[s,(0,t.useCallback)((e=>{a&&r.set(e)}),[a,r])]}({groupId:s}),v=(()=>{const e=c??g;return h({value:e,tabValues:r})?e:null})();(0,l.Z)((()=>{v&&d(v)}),[v]);return{selectedValue:i,selectValue:(0,t.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);d(e),u(e),f(e)}),[u,f,r]),tabValues:r}}var f=a(2389);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=a(5893);function j(e){let{className:n,block:a,selectedValue:t,selectValue:i,tabValues:l}=e;const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.o5)(),o=e=>{const n=e.currentTarget,a=d.indexOf(n),s=l[a].value;s!==t&&(c(n),i(s))},u=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const a=d.indexOf(e.currentTarget)+1;n=d[a]??d[0];break}case"ArrowLeft":{const a=d.indexOf(e.currentTarget)-1;n=d[a]??d[d.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":a},n),children:l.map((e=>{let{value:n,label:a,attributes:r}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>d.push(e),onKeyDown:u,onClick:o,...r,className:(0,s.Z)("tabs__item",v.tabItem,r?.className,{"tabs__item--active":t===n}),children:a??n},n)}))})}function b(e){let{lazy:n,children:a,selectedValue:s}=e;const r=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===s));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=g(e);return(0,x.jsxs)("div",{className:(0,s.Z)("tabs-container",v.tabList),children:[(0,x.jsx)(j,{...e,...n}),(0,x.jsx)(b,{...e,...n})]})}function k(e){const n=(0,f.Z)();return(0,x.jsx)(y,{...e,children:u(e.children)},String(n))}},1151:(e,n,a)=>{a.d(n,{Z:()=>l,a:()=>i});var t=a(7294);const s={},r=t.createContext(s);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);